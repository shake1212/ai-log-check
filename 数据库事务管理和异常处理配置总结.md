# æ•°æ®åº“äº‹åŠ¡ç®¡ç†å’Œå¼‚å¸¸å¤„ç†é…ç½®æ€»ç»“

## ğŸ“‹ é…ç½®æ¦‚è¿°

æœ¬æ¬¡é…ç½®ä¸ºAIæ—¥å¿—å¼‚å¸¸æ£€æµ‹ä¸é¢„è­¦ç³»ç»Ÿå®ç°äº†å®Œå–„çš„æ•°æ®åº“äº‹åŠ¡ç®¡ç†å’Œå¼‚å¸¸å¤„ç†æœºåˆ¶ï¼Œç¡®ä¿æ•°æ®ä¸€è‡´æ€§ã€ç³»ç»Ÿç¨³å®šæ€§å’Œç”¨æˆ·ä½“éªŒã€‚

## ğŸ—ï¸ æ¶æ„è®¾è®¡

### 1. äº‹åŠ¡ç®¡ç†æ¶æ„
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    äº‹åŠ¡ç®¡ç†æ¶æ„                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Controller Layer (æ§åˆ¶å™¨å±‚)                                â”‚
â”‚  â”œâ”€â”€ @RestControllerAdvice (å…¨å±€å¼‚å¸¸å¤„ç†)                   â”‚
â”‚  â””â”€â”€ å¼‚å¸¸å“åº”ç»Ÿä¸€æ ¼å¼                                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Service Layer (æœåŠ¡å±‚)                                     â”‚
â”‚  â”œâ”€â”€ @Transactional (äº‹åŠ¡æ³¨è§£)                              â”‚
â”‚  â”œâ”€â”€ äº‹åŠ¡ä¼ æ’­è¡Œä¸ºæ§åˆ¶                                        â”‚
â”‚  â””â”€â”€ å¼‚å¸¸å¤„ç†å’Œå›æ»šæœºåˆ¶                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Repository Layer (æ•°æ®è®¿é—®å±‚)                              â”‚
â”‚  â”œâ”€â”€ JPA Repository                                         â”‚
â”‚  â”œâ”€â”€ æ‰¹é‡æ“ä½œä¼˜åŒ–                                            â”‚
â”‚  â””â”€â”€ æŸ¥è¯¢æ€§èƒ½ä¼˜åŒ–                                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Database Layer (æ•°æ®åº“å±‚)                                  â”‚
â”‚  â”œâ”€â”€ MySQL 8.0                                             â”‚
â”‚  â”œâ”€â”€ è¿æ¥æ± ç®¡ç† (HikariCP)                                  â”‚
â”‚  â””â”€â”€ äº‹åŠ¡éš”ç¦»çº§åˆ«æ§åˆ¶                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”§ æ ¸å¿ƒç»„ä»¶

### 1. äº‹åŠ¡ç®¡ç†é…ç½® (`TransactionConfig.java`)

#### åŠŸèƒ½ç‰¹æ€§
- âœ… **JPAäº‹åŠ¡ç®¡ç†å™¨**: é…ç½®Spring JPAäº‹åŠ¡ç®¡ç†å™¨
- âœ… **äº‹åŠ¡æ¨¡æ¿**: æä¾›ç¼–ç¨‹å¼äº‹åŠ¡æ”¯æŒ
- âœ… **åªè¯»äº‹åŠ¡æ¨¡æ¿**: ä¼˜åŒ–æŸ¥è¯¢æ€§èƒ½
- âœ… **æ‰¹é‡æ“ä½œäº‹åŠ¡æ¨¡æ¿**: æ”¯æŒé•¿æ—¶é—´æ‰¹é‡æ“ä½œ
- âœ… **äº‹åŠ¡è¶…æ—¶æ§åˆ¶**: é˜²æ­¢é•¿æ—¶é—´é”å®š
- âœ… **å›æ»šç­–ç•¥**: è‡ªåŠ¨å›æ»šå¤±è´¥äº‹åŠ¡

#### é…ç½®è¯¦æƒ…
```java
@Configuration
@EnableTransactionManagement
public class TransactionConfig {
    
    // JPAäº‹åŠ¡ç®¡ç†å™¨
    @Bean
    public PlatformTransactionManager transactionManager(EntityManagerFactory entityManagerFactory) {
        JpaTransactionManager transactionManager = new JpaTransactionManager();
        transactionManager.setEntityManagerFactory(entityManagerFactory);
        transactionManager.setDefaultTimeout(30);  // 30ç§’è¶…æ—¶
        transactionManager.setRollbackOnCommitFailure(true);  // æäº¤å¤±è´¥æ—¶å›æ»š
        transactionManager.setNestedTransactionAllowed(true);  // å…è®¸åµŒå¥—äº‹åŠ¡
        return transactionManager;
    }
    
    // æ™®é€šäº‹åŠ¡æ¨¡æ¿
    @Bean
    public TransactionTemplate transactionTemplate(PlatformTransactionManager transactionManager) {
        TransactionTemplate template = new TransactionTemplate(transactionManager);
        template.setTimeout(30);  // 30ç§’è¶…æ—¶
        template.setReadOnly(false);  // è¯»å†™äº‹åŠ¡
        template.setIsolationLevel(TransactionTemplate.ISOLATION_READ_COMMITTED);
        return template;
    }
    
    // åªè¯»äº‹åŠ¡æ¨¡æ¿
    @Bean("readOnlyTransactionTemplate")
    public TransactionTemplate readOnlyTransactionTemplate(PlatformTransactionManager transactionManager) {
        TransactionTemplate template = new TransactionTemplate(transactionManager);
        template.setReadOnly(true);  // åªè¯»äº‹åŠ¡
        template.setTimeout(10);  // 10ç§’è¶…æ—¶
        return template;
    }
    
    // æ‰¹é‡æ“ä½œäº‹åŠ¡æ¨¡æ¿
    @Bean("batchTransactionTemplate")
    public TransactionTemplate batchTransactionTemplate(PlatformTransactionManager transactionManager) {
        TransactionTemplate template = new TransactionTemplate(transactionManager);
        template.setTimeout(300);  // 5åˆ†é’Ÿè¶…æ—¶
        template.setReadOnly(false);
        return template;
    }
}
```

### 2. å¼‚å¸¸å¤„ç†ä½“ç³»

#### å¼‚å¸¸ç±»å±‚æ¬¡ç»“æ„
```
Exception (JavaåŸºç¡€å¼‚å¸¸)
â”œâ”€â”€ RuntimeException
â”‚   â”œâ”€â”€ DatabaseException (æ•°æ®åº“å¼‚å¸¸åŸºç±»)
â”‚   â”‚   â”œâ”€â”€ TransactionException (äº‹åŠ¡å¼‚å¸¸)
â”‚   â”‚   â”œâ”€â”€ BatchOperationException (æ‰¹é‡æ“ä½œå¼‚å¸¸)
â”‚   â”‚   â””â”€â”€ DataIntegrityException (æ•°æ®å®Œæ•´æ€§å¼‚å¸¸)
â”‚   â””â”€â”€ å…¶ä»–ä¸šåŠ¡å¼‚å¸¸
â””â”€â”€ å…¶ä»–ç³»ç»Ÿå¼‚å¸¸
```

#### è‡ªå®šä¹‰å¼‚å¸¸ç±»

##### DatabaseException (æ•°æ®åº“å¼‚å¸¸åŸºç±»)
```java
public class DatabaseException extends RuntimeException {
    private final String errorCode;
    private final Object[] args;
    
    // æ”¯æŒé”™è¯¯ç å’Œå‚æ•°åŒ–æ¶ˆæ¯
    public DatabaseException(String errorCode, String message, Object... args) {
        super(message);
        this.errorCode = errorCode;
        this.args = args;
    }
}
```

##### BatchOperationException (æ‰¹é‡æ“ä½œå¼‚å¸¸)
```java
public class BatchOperationException extends DatabaseException {
    private final int successCount;
    private final int errorCount;
    private final int totalCount;
    
    // æä¾›æ‰¹é‡æ“ä½œç»Ÿè®¡ä¿¡æ¯
    public double getSuccessRate() {
        return totalCount > 0 ? (double) successCount / totalCount : 0.0;
    }
}
```

##### DataIntegrityException (æ•°æ®å®Œæ•´æ€§å¼‚å¸¸)
```java
public class DataIntegrityException extends DatabaseException {
    private final String constraintName;
    private final String tableName;
    
    // æä¾›çº¦æŸå’Œè¡¨ä¿¡æ¯
}
```

### 3. å…¨å±€å¼‚å¸¸å¤„ç†å™¨ (`GlobalExceptionHandler.java`)

#### å¼‚å¸¸å¤„ç†ç­–ç•¥
- âœ… **åˆ†å±‚å¼‚å¸¸å¤„ç†**: ä¸åŒå±‚æ¬¡å¼‚å¸¸é‡‡ç”¨ä¸åŒå¤„ç†ç­–ç•¥
- âœ… **ç»Ÿä¸€é”™è¯¯å“åº”**: æ ‡å‡†åŒ–çš„é”™è¯¯å“åº”æ ¼å¼
- âœ… **æ—¥å¿—è®°å½•**: å®Œæ•´çš„å¼‚å¸¸æ—¥å¿—è®°å½•
- âœ… **ç”¨æˆ·å‹å¥½**: ç”¨æˆ·å‹å¥½çš„é”™è¯¯æ¶ˆæ¯
- âœ… **å¼€å‘è°ƒè¯•**: è¯¦ç»†çš„å¼€å‘è°ƒè¯•ä¿¡æ¯

#### å¼‚å¸¸å¤„ç†æ˜ å°„
```java
@RestControllerAdvice
public class GlobalExceptionHandler {
    
    // æ•°æ®åº“å¼‚å¸¸ -> 500 Internal Server Error
    @ExceptionHandler(DatabaseException.class)
    public ResponseEntity<ErrorResponse> handleDatabaseException(DatabaseException ex) {
        logger.error("Database error occurred: {}", ex.getMessage(), ex);
        return ResponseEntity.status(HttpStatus.INTERNAL_SERVER_ERROR)
                .body(new ErrorResponse(500, "æ•°æ®åº“æ“ä½œå¤±è´¥: " + ex.getMessage(), LocalDateTime.now()));
    }
    
    // æ‰¹é‡æ“ä½œå¼‚å¸¸ -> 206 Partial Content
    @ExceptionHandler(BatchOperationException.class)
    public ResponseEntity<BatchErrorResponse> handleBatchOperationException(BatchOperationException ex) {
        return ResponseEntity.status(HttpStatus.PARTIAL_CONTENT)
                .body(new BatchErrorResponse(206, "æ‰¹é‡æ“ä½œéƒ¨åˆ†å¤±è´¥", LocalDateTime.now(),
                        ex.getSuccessCount(), ex.getErrorCount(), ex.getTotalCount()));
    }
    
    // æ•°æ®å®Œæ•´æ€§å¼‚å¸¸ -> 409 Conflict
    @ExceptionHandler(DataIntegrityException.class)
    public ResponseEntity<ErrorResponse> handleDataIntegrityException(DataIntegrityException ex) {
        return ResponseEntity.status(HttpStatus.CONFLICT)
                .body(new ErrorResponse(409, "æ•°æ®å®Œæ•´æ€§é”™è¯¯: " + ex.getMessage(), LocalDateTime.now()));
    }
    
    // ä¹è§‚é”å¼‚å¸¸ -> 409 Conflict
    @ExceptionHandler(OptimisticLockException.class)
    public ResponseEntity<ErrorResponse> handleOptimisticLockException(OptimisticLockException ex) {
        return ResponseEntity.status(HttpStatus.CONFLICT)
                .body(new ErrorResponse(409, "æ•°æ®å·²è¢«å…¶ä»–ç”¨æˆ·ä¿®æ”¹ï¼Œè¯·åˆ·æ–°åé‡è¯•", LocalDateTime.now()));
    }
}
```

#### é”™è¯¯å“åº”æ ¼å¼

##### æ ‡å‡†é”™è¯¯å“åº”
```json
{
    "status": 500,
    "message": "æ•°æ®åº“æ“ä½œå¤±è´¥: è¿æ¥è¶…æ—¶",
    "timestamp": "2024-01-15T10:30:00"
}
```

##### æ‰¹é‡æ“ä½œé”™è¯¯å“åº”
```json
{
    "status": 206,
    "message": "æ‰¹é‡æ“ä½œéƒ¨åˆ†å¤±è´¥: éƒ¨åˆ†è®°å½•ä¿å­˜å¤±è´¥",
    "timestamp": "2024-01-15T10:30:00",
    "successCount": 95,
    "errorCount": 5,
    "totalCount": 100,
    "successRate": 0.95,
    "errorRate": 0.05
}
```

##### éªŒè¯é”™è¯¯å“åº”
```json
{
    "status": 400,
    "message": "Validation failed",
    "timestamp": "2024-01-15T10:30:00",
    "errors": {
        "username": "ç”¨æˆ·åä¸èƒ½ä¸ºç©º",
        "email": "é‚®ç®±æ ¼å¼ä¸æ­£ç¡®"
    }
}
```

## ğŸ¯ æœåŠ¡å±‚äº‹åŠ¡é…ç½®

### 1. äº‹åŠ¡æ³¨è§£ä½¿ç”¨

#### æ‰¹é‡æ“ä½œæœåŠ¡ (`BatchLogServiceImpl`)
```java
@Service
@Transactional
public class BatchLogServiceImpl implements BatchLogService {
    
    // æ‰¹é‡ä¿å­˜ - éœ€è¦äº‹åŠ¡ï¼Œè¶…æ—¶5åˆ†é’Ÿ
    @Override
    @Transactional(propagation = Propagation.REQUIRED, rollbackFor = Exception.class, timeout = 300)
    public int batchSaveLogs(List<LogEntryDTO> logEntries) {
        // å®ç°é€»è¾‘
    }
    
    // å¼‚æ­¥æ‰¹é‡ä¿å­˜ - æ–°äº‹åŠ¡ï¼Œè¶…æ—¶5åˆ†é’Ÿ
    @Override
    @Async("batchOperationExecutor")
    @Transactional(propagation = Propagation.REQUIRES_NEW, rollbackFor = Exception.class, timeout = 300)
    public void batchSaveLogsAsync(List<LogEntryDTO> logEntries) {
        // å®ç°é€»è¾‘
    }
    
    // æ‰¹é‡åˆ é™¤ - éœ€è¦äº‹åŠ¡ï¼Œè¶…æ—¶2åˆ†é’Ÿ
    @Override
    @Transactional(propagation = Propagation.REQUIRED, rollbackFor = Exception.class, timeout = 120)
    public int batchDeleteLogs(List<String> ids) {
        // å®ç°é€»è¾‘
    }
}
```

#### äº‹ä»¶æŸ¥è¯¢æœåŠ¡ (`EventQueryServiceImpl`)
```java
@Service
@Transactional(readOnly = true)  // é»˜è®¤åªè¯»äº‹åŠ¡
public class EventQueryServiceImpl implements EventQueryService {
    
    // æŸ¥è¯¢æ“ä½œ - åªè¯»äº‹åŠ¡
    @Override
    @Transactional(readOnly = true, timeout = 30)
    public EventStatisticsDTO getComprehensiveStatistics() {
        // å®ç°é€»è¾‘
    }
    
    // ç»Ÿè®¡æ“ä½œ - åªè¯»äº‹åŠ¡
    @Override
    @Transactional(readOnly = true, timeout = 60)
    public Map<String, Long> getSourceStatistics(LocalDateTime startTime, LocalDateTime endTime) {
        // å®ç°é€»è¾‘
    }
}
```

### 2. äº‹åŠ¡ä¼ æ’­è¡Œä¸º

#### ä¼ æ’­è¡Œä¸ºè¯´æ˜
- **REQUIRED**: å¦‚æœå­˜åœ¨äº‹åŠ¡åˆ™åŠ å…¥ï¼Œå¦åˆ™åˆ›å»ºæ–°äº‹åŠ¡
- **REQUIRES_NEW**: æ€»æ˜¯åˆ›å»ºæ–°äº‹åŠ¡ï¼ŒæŒ‚èµ·å½“å‰äº‹åŠ¡
- **SUPPORTS**: å¦‚æœå­˜åœ¨äº‹åŠ¡åˆ™åŠ å…¥ï¼Œå¦åˆ™ä»¥éäº‹åŠ¡æ–¹å¼æ‰§è¡Œ
- **NOT_SUPPORTED**: ä»¥éäº‹åŠ¡æ–¹å¼æ‰§è¡Œï¼ŒæŒ‚èµ·å½“å‰äº‹åŠ¡
- **NEVER**: ä»¥éäº‹åŠ¡æ–¹å¼æ‰§è¡Œï¼Œå¦‚æœå­˜åœ¨äº‹åŠ¡åˆ™æŠ›å‡ºå¼‚å¸¸
- **MANDATORY**: å¿…é¡»åœ¨äº‹åŠ¡ä¸­æ‰§è¡Œï¼Œå¦åˆ™æŠ›å‡ºå¼‚å¸¸
- **NESTED**: åµŒå¥—äº‹åŠ¡æ‰§è¡Œ

#### ä½¿ç”¨åœºæ™¯
```java
// æ‰¹é‡æ“ä½œ - éœ€è¦ç‹¬ç«‹äº‹åŠ¡
@Transactional(propagation = Propagation.REQUIRED)

// å¼‚æ­¥æ“ä½œ - éœ€è¦æ–°äº‹åŠ¡
@Transactional(propagation = Propagation.REQUIRES_NEW)

// æŸ¥è¯¢æ“ä½œ - åªè¯»äº‹åŠ¡
@Transactional(readOnly = true)

// æ—¥å¿—è®°å½• - æ”¯æŒäº‹åŠ¡ä½†ä¸å¼ºåˆ¶
@Transactional(propagation = Propagation.SUPPORTS)
```

## ğŸ—„ï¸ æ•°æ®åº“é…ç½®ä¼˜åŒ–

### 1. è¿æ¥æ± é…ç½®
```yaml
spring:
  datasource:
    hikari:
      maximum-pool-size: 20          # æœ€å¤§è¿æ¥æ•°
      minimum-idle: 5                # æœ€å°ç©ºé—²è¿æ¥
      connection-timeout: 30000      # è¿æ¥è¶…æ—¶30ç§’
      idle-timeout: 600000           # ç©ºé—²è¶…æ—¶10åˆ†é’Ÿ
      max-lifetime: 1800000          # è¿æ¥æœ€å¤§ç”Ÿå‘½å‘¨æœŸ30åˆ†é’Ÿ
      leak-detection-threshold: 60000 # è¿æ¥æ³„æ¼æ£€æµ‹1åˆ†é’Ÿ
      auto-commit: false             # ç¦ç”¨è‡ªåŠ¨æäº¤
```

### 2. JPA/Hibernateé…ç½®
```yaml
spring:
  jpa:
    properties:
      hibernate:
        connection:
          provider_disables_autocommit: true  # ç¦ç”¨è‡ªåŠ¨æäº¤
        jdbc:
          batch_size: 20                      # æ‰¹é‡å¤§å°
          batch_versioned_data: true          # æ‰¹é‡ç‰ˆæœ¬åŒ–æ•°æ®
        order_inserts: true                   # æ’åºæ’å…¥
        order_updates: true                   # æ’åºæ›´æ–°
        batch_fetch_style: dynamic            # åŠ¨æ€æ‰¹é‡è·å–
        generate_statistics: false            # ç¦ç”¨ç»Ÿè®¡ç”Ÿæˆ
        cache:
          use_second_level_cache: false       # ç¦ç”¨äºŒçº§ç¼“å­˜
          use_query_cache: false              # ç¦ç”¨æŸ¥è¯¢ç¼“å­˜
    open-in-view: false                       # ç¦ç”¨Open Session in View
```

### 3. äº‹åŠ¡éš”ç¦»çº§åˆ«
- **READ_COMMITTED**: è¯»å·²æäº¤ï¼ˆé»˜è®¤ï¼‰
- **READ_UNCOMMITTED**: è¯»æœªæäº¤
- **REPEATABLE_READ**: å¯é‡å¤è¯»
- **SERIALIZABLE**: ä¸²è¡ŒåŒ–

## ğŸ§ª æµ‹è¯•é…ç½®

### 1. äº‹åŠ¡é…ç½®æµ‹è¯• (`TransactionConfigTest.java`)
```java
@SpringBootTest
@ActiveProfiles("test")
class TransactionConfigTest {
    
    @Test
    void testTransactionManagerBean() {
        assertNotNull(transactionManager);
        assertTrue(transactionManager instanceof JpaTransactionManager);
    }
    
    @Test
    void testTransactionExecution() {
        String result = transactionTemplate.execute(status -> {
            assertFalse(status.isRollbackOnly());
            return "success";
        });
        assertEquals("success", result);
    }
    
    @Test
    void testTransactionRollback() {
        assertThrows(RuntimeException.class, () -> {
            transactionTemplate.execute(status -> {
                status.setRollbackOnly();
                throw new RuntimeException("æµ‹è¯•å›æ»š");
            });
        });
    }
}
```

### 2. å¼‚å¸¸å¤„ç†æµ‹è¯• (`GlobalExceptionHandlerTest.java`)
```java
@SpringBootTest
@ActiveProfiles("test")
class GlobalExceptionHandlerTest {
    
    @Test
    void testHandleDatabaseException() {
        DatabaseException ex = new DatabaseException("æ•°æ®åº“è¿æ¥å¤±è´¥");
        ResponseEntity<ErrorResponse> response = globalExceptionHandler.handleDatabaseException(ex);
        
        assertEquals(HttpStatus.INTERNAL_SERVER_ERROR, response.getStatusCode());
        assertEquals("æ•°æ®åº“æ“ä½œå¤±è´¥: æ•°æ®åº“è¿æ¥å¤±è´¥", response.getBody().getMessage());
    }
    
    @Test
    void testHandleBatchOperationException() {
        BatchOperationException ex = new BatchOperationException("æ‰¹é‡æ“ä½œéƒ¨åˆ†å¤±è´¥", 5, 2, 7);
        ResponseEntity<BatchErrorResponse> response = globalExceptionHandler.handleBatchOperationException(ex);
        
        assertEquals(HttpStatus.PARTIAL_CONTENT, response.getStatusCode());
        assertEquals(5, response.getBody().getSuccessCount());
        assertEquals(2, response.getBody().getErrorCount());
        assertEquals(7, response.getBody().getTotalCount());
    }
}
```

## ğŸ“Š æ€§èƒ½ä¼˜åŒ–

### 1. æ‰¹é‡æ“ä½œä¼˜åŒ–
- **æ‰¹é‡å¤§å°**: 1000-5000æ¡è®°å½•ä¸ºä¸€æ‰¹
- **æ‰¹é‡æ’å…¥**: ä½¿ç”¨`saveAll()`æ–¹æ³•
- **æ‰¹é‡æ›´æ–°**: ä½¿ç”¨åŸç”ŸSQLæ‰¹é‡æ›´æ–°
- **æ‰¹é‡åˆ é™¤**: ä½¿ç”¨`deleteAllById()`æ–¹æ³•

### 2. æŸ¥è¯¢ä¼˜åŒ–
- **åªè¯»äº‹åŠ¡**: æŸ¥è¯¢æ“ä½œä½¿ç”¨åªè¯»äº‹åŠ¡
- **åˆ†é¡µæŸ¥è¯¢**: å¤§æ•°æ®é‡æŸ¥è¯¢ä½¿ç”¨åˆ†é¡µ
- **ç´¢å¼•ä¼˜åŒ–**: ä¸ºå¸¸ç”¨æŸ¥è¯¢å­—æ®µæ·»åŠ ç´¢å¼•
- **æŸ¥è¯¢ç¼“å­˜**: ç¦ç”¨ä¸å¿…è¦çš„ç¼“å­˜

### 3. è¿æ¥æ± ä¼˜åŒ–
- **è¿æ¥å¤ç”¨**: åˆç†é…ç½®è¿æ¥æ± å¤§å°
- **è¿æ¥æ£€æµ‹**: å®šæœŸæ£€æµ‹è¿æ¥æœ‰æ•ˆæ€§
- **è¿æ¥æ³„æ¼**: æ£€æµ‹å’Œé˜²æ­¢è¿æ¥æ³„æ¼
- **è¶…æ—¶æ§åˆ¶**: è®¾ç½®åˆç†çš„è¶…æ—¶æ—¶é—´

## ğŸ”’ å®‰å…¨è€ƒè™‘

### 1. äº‹åŠ¡å®‰å…¨
- **å›æ»šæœºåˆ¶**: å¼‚å¸¸æ—¶è‡ªåŠ¨å›æ»š
- **è¶…æ—¶æ§åˆ¶**: é˜²æ­¢é•¿æ—¶é—´é”å®š
- **éš”ç¦»çº§åˆ«**: åˆé€‚çš„éš”ç¦»çº§åˆ«
- **æ­»é”æ£€æµ‹**: æ•°æ®åº“æ­»é”æ£€æµ‹

### 2. å¼‚å¸¸å®‰å…¨
- **æ•æ„Ÿä¿¡æ¯**: ä¸æš´éœ²æ•æ„Ÿé”™è¯¯ä¿¡æ¯
- **æ—¥å¿—å®‰å…¨**: å¼‚å¸¸æ—¥å¿—ä¸åŒ…å«æ•æ„Ÿæ•°æ®
- **é”™è¯¯ç **: ä½¿ç”¨æ ‡å‡†HTTPçŠ¶æ€ç 
- **ç”¨æˆ·å‹å¥½**: æä¾›ç”¨æˆ·å‹å¥½çš„é”™è¯¯æ¶ˆæ¯

## ğŸ“ˆ ç›‘æ§å’Œæ—¥å¿—

### 1. äº‹åŠ¡ç›‘æ§
- **äº‹åŠ¡ç»Ÿè®¡**: è®°å½•äº‹åŠ¡æ‰§è¡Œç»Ÿè®¡
- **æ€§èƒ½ç›‘æ§**: ç›‘æ§äº‹åŠ¡æ‰§è¡Œæ—¶é—´
- **å¼‚å¸¸ç›‘æ§**: ç›‘æ§äº‹åŠ¡å¼‚å¸¸æƒ…å†µ
- **æ­»é”ç›‘æ§**: ç›‘æ§æ•°æ®åº“æ­»é”

### 2. å¼‚å¸¸æ—¥å¿—
- **ç»“æ„åŒ–æ—¥å¿—**: ä½¿ç”¨ç»“æ„åŒ–æ—¥å¿—æ ¼å¼
- **æ—¥å¿—çº§åˆ«**: åˆç†çš„æ—¥å¿—çº§åˆ«è®¾ç½®
- **æ—¥å¿—èšåˆ**: æ”¯æŒæ—¥å¿—èšåˆå’Œåˆ†æ
- **å‘Šè­¦æœºåˆ¶**: å¼‚å¸¸æƒ…å†µå‘Šè­¦

## ğŸ¯ æœ€ä½³å®è·µ

### 1. äº‹åŠ¡ä½¿ç”¨åŸåˆ™
- **æœ€å°äº‹åŠ¡**: äº‹åŠ¡èŒƒå›´å°½å¯èƒ½å°
- **åˆç†è¶…æ—¶**: è®¾ç½®åˆç†çš„è¶…æ—¶æ—¶é—´
- **å¼‚å¸¸å¤„ç†**: å®Œå–„çš„å¼‚å¸¸å¤„ç†æœºåˆ¶
- **æ€§èƒ½è€ƒè™‘**: è€ƒè™‘äº‹åŠ¡å¯¹æ€§èƒ½çš„å½±å“

### 2. å¼‚å¸¸å¤„ç†åŸåˆ™
- **åˆ†å±‚å¤„ç†**: ä¸åŒå±‚æ¬¡é‡‡ç”¨ä¸åŒå¤„ç†ç­–ç•¥
- **ç”¨æˆ·å‹å¥½**: æä¾›ç”¨æˆ·å‹å¥½çš„é”™è¯¯ä¿¡æ¯
- **å¼€å‘è°ƒè¯•**: ä¿ç•™è¯¦ç»†çš„è°ƒè¯•ä¿¡æ¯
- **æ—¥å¿—è®°å½•**: å®Œæ•´çš„å¼‚å¸¸æ—¥å¿—è®°å½•

### 3. æ€§èƒ½ä¼˜åŒ–åŸåˆ™
- **æ‰¹é‡æ“ä½œ**: ä¼˜å…ˆä½¿ç”¨æ‰¹é‡æ“ä½œ
- **åªè¯»äº‹åŠ¡**: æŸ¥è¯¢ä½¿ç”¨åªè¯»äº‹åŠ¡
- **è¿æ¥æ± **: åˆç†é…ç½®è¿æ¥æ± 
- **ç´¢å¼•ä¼˜åŒ–**: ä¼˜åŒ–æ•°æ®åº“ç´¢å¼•

## ğŸ“‹ æ€»ç»“

### å®ç°æˆæœ
1. **å®Œå–„çš„äº‹åŠ¡ç®¡ç†**: æ”¯æŒå£°æ˜å¼å’Œç¼–ç¨‹å¼äº‹åŠ¡
2. **å…¨é¢çš„å¼‚å¸¸å¤„ç†**: è¦†ç›–å„ç§å¼‚å¸¸åœºæ™¯
3. **æ€§èƒ½ä¼˜åŒ–**: æ‰¹é‡æ“ä½œå’ŒæŸ¥è¯¢ä¼˜åŒ–
4. **å®‰å…¨å¯é **: äº‹åŠ¡å®‰å…¨å’Œå¼‚å¸¸å®‰å…¨
5. **æ˜“äºç»´æŠ¤**: æ¸…æ™°çš„ä»£ç ç»“æ„å’Œæ–‡æ¡£

### æŠ€æœ¯ä»·å€¼
1. **æ•°æ®ä¸€è‡´æ€§**: ç¡®ä¿æ•°æ®æ“ä½œçš„åŸå­æ€§
2. **ç³»ç»Ÿç¨³å®šæ€§**: å®Œå–„çš„å¼‚å¸¸å¤„ç†æœºåˆ¶
3. **ç”¨æˆ·ä½“éªŒ**: å‹å¥½çš„é”™è¯¯æç¤ºå’Œå¤„ç†
4. **å¼€å‘æ•ˆç‡**: æ ‡å‡†åŒ–çš„å¼‚å¸¸å¤„ç†æµç¨‹
5. **è¿ç»´æ”¯æŒ**: å®Œå–„çš„ç›‘æ§å’Œæ—¥å¿—

### ä¸šåŠ¡ä»·å€¼
1. **å¯é æ€§**: æé«˜ç³»ç»Ÿå¯é æ€§
2. **æ€§èƒ½**: ä¼˜åŒ–ç³»ç»Ÿæ€§èƒ½
3. **ç»´æŠ¤æ€§**: é™ä½ç»´æŠ¤æˆæœ¬
4. **æ‰©å±•æ€§**: æ”¯æŒç³»ç»Ÿæ‰©å±•
5. **åˆè§„æ€§**: æ»¡è¶³ä¸šåŠ¡åˆè§„è¦æ±‚

é€šè¿‡æœ¬æ¬¡é…ç½®ï¼Œç³»ç»Ÿå…·å¤‡äº†ä¼ä¸šçº§çš„äº‹åŠ¡ç®¡ç†å’Œå¼‚å¸¸å¤„ç†èƒ½åŠ›ï¼Œä¸ºåç»­çš„ä¸šåŠ¡å‘å±•æä¾›äº†åšå®çš„æŠ€æœ¯åŸºç¡€ã€‚
