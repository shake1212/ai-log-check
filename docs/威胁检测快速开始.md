# 威胁检测系统 - 快速开始

## 🚀 5分钟快速部署

### 步骤1: 初始化数据库

```bash
# 进入数据库脚本目录
cd back-system/database

# 执行威胁检测表创建脚本
mysql -u root -p ai_log_system < threat_detection_tables.sql
```

**脚本会自动完成**:
- ✅ 创建威胁规则表和告警表
- ✅ 创建视图、存储过程、触发器
- ✅ 插入10个默认检测规则
- ✅ 插入示例告警数据

### 步骤2: 启动后端服务

```bash
cd back-system
mvn spring-boot:run
```

**启动成功标志**:
```
Started AiLogSystemApplication in X.XXX seconds
```

### 步骤3: 启动前端服务

```bash
cd ai-log-system
npm install  # 首次运行需要安装依赖
npm start
```

**启动成功标志**:
```
Compiled successfully!
You can now view ai-log-system in the browser.
Local: http://localhost:8000
```

### 步骤4: 登录系统

1. 打开浏览器访问: `http://localhost:8000`
2. 使用管理员账户登录:
   - 用户名: `admin`
   - 密码: `admin123`

---

## 📋 功能入口

登录成功后，访问以下功能页面：

### 1. 威胁检测规则管理
**路径**: 安全管理 > 威胁检测规则  
**URL**: `/threat-rules`

**首次使用**:
- 点击 **"初始化默认规则"** 按钮（如果数据库脚本已执行，则跳过）
- 查看系统自动创建的10个默认规则
- 点击 **"刷新引擎"** 激活规则

### 2. 威胁告警管理
**路径**: 安全管理 > 威胁告警  
**URL**: `/threat-alerts`

**查看示例告警**:
- 系统已自动创建4条示例告警
- 点击告警ID查看详情
- 点击"处理"按钮尝试处理告警

### 3. 实时威胁监控
**路径**: 安全管理 > 威胁监控  
**URL**: `/threat-monitor`

**查看监控面板**:
- 查看实时统计指标
- 查看告警趋势图表
- 查看威胁类型分布
- 查看热点IP Top 10

---

## 🎯 快速测试

### 测试1: 创建一个简单的规则

1. 进入威胁检测规则页面
2. 点击 **"新建规则"**
3. 填写基本信息:
   - 规则名称: `测试SQL注入检测`
   - 威胁类型: `SQL_INJECTION`
   - 严重程度: `HIGH`
   - 检测模式: `PATTERN_MATCH`
4. 填写规则条件:
   ```json
   {
     "patterns": ["select * from", "drop table"]
   }
   ```
5. 启用状态: 开启
6. 点击 **"确定"** 保存
7. 点击 **"刷新引擎"** 使规则生效

### 测试2: 查看告警统计

1. 进入威胁告警页面
2. 查看顶部统计卡片
3. 使用搜索筛选功能:
   - 选择威胁类型: `SQL注入`
   - 点击 **"搜索"**
4. 查看筛选后的告警列表

### 测试3: 处理一个告警

1. 在告警列表中选择一个告警
2. 点击 **"处理"** 按钮
3. 填写处理信息:
   - 处理状态: `已解决`
   - 处理人: `测试管理员`
   - 处理备注: `测试处理流程`
4. 点击 **"确定"** 提交
5. 查看告警状态已更新

### 测试4: 查看监控面板

1. 进入威胁监控页面
2. 选择时间范围: 最近24小时
3. 查看各类图表和统计
4. 点击 **"刷新"** 按钮更新数据

---

## 🔧 API测试

### 使用Postman或curl测试API

**1. 获取规则列表**
```bash
curl -X GET "http://localhost:8080/api/threat-detection/rules?page=0&size=10" \
  -H "Authorization: Bearer YOUR_TOKEN"
```

**2. 获取待处理告警**
```bash
curl -X GET "http://localhost:8080/api/threat-detection/alerts/pending" \
  -H "Authorization: Bearer YOUR_TOKEN"
```

**3. 获取告警统计**
```bash
curl -X GET "http://localhost:8080/api/threat-detection/alerts/statistics" \
  -H "Authorization: Bearer YOUR_TOKEN"
```

> 注意: 请先登录获取JWT Token，将 `YOUR_TOKEN` 替换为实际的token值

---

## 📖 更多文档

详细的使用说明和API文档:

1. **威胁检测API文档.md** - 完整的REST API接口文档
2. **威胁检测系统使用指南.md** - 详细的功能使用指南
3. **威胁检测系统实施总结.md** - 系统实施和技术总结

---

## ❓ 常见问题

### Q1: 数据库连接失败？
**A**: 检查 `back-system/src/main/resources/application.yml` 中的数据库配置:
```yaml
spring:
  datasource:
    url: jdbc:mysql://localhost:3306/ai_log_system
    username: root
    password: 123456
```

### Q2: 前端启动失败？
**A**: 
1. 检查Node.js版本（需要14+）
2. 删除 `node_modules` 文件夹，重新 `npm install`
3. 检查端口8000是否被占用

### Q3: 规则不生效？
**A**: 
1. 检查规则是否已启用
2. 点击"刷新引擎"按钮
3. 查看后端日志确认规则加载成功

### Q4: 看不到告警？
**A**: 
1. 确认规则已创建并启用
2. 确认有日志数据接入系统
3. 检查规则条件是否匹配日志数据

---

## 🎓 学习建议

### 第1天: 熟悉系统
- 浏览所有功能页面
- 理解系统架构
- 阅读使用指南

### 第2天: 规则配置
- 学习不同检测模式
- 创建自定义规则
- 测试规则效果

### 第3天: 告警处理
- 处理示例告警
- 理解告警生命周期
- 学习最佳实践

### 第4天: 监控分析
- 使用监控面板
- 分析告警趋势
- 优化检测规则

### 第5天: API集成
- 学习API接口
- 编写集成代码
- 实现自动化

---

## 🚨 紧急支持

如遇到问题:
1. 查看后端日志: `back-system/logs/ai-log-system.log`
2. 查看浏览器控制台错误
3. 参考文档中的故障排查章节
4. 联系技术支持

---

## ✅ 检查清单

部署完成后，确认以下功能正常:

- [ ] 数据库表创建成功
- [ ] 后端服务启动成功
- [ ] 前端服务启动成功
- [ ] 能够正常登录系统
- [ ] 能够查看规则列表
- [ ] 能够创建新规则
- [ ] 能够查看告警列表
- [ ] 能够处理告警
- [ ] 能够查看监控面板
- [ ] API接口可以正常访问

---

**恭喜! 🎉**

你已经成功部署了威胁检测和告警生成系统。现在可以开始探索更多高级功能了！

📚 **下一步**: 阅读《威胁检测系统使用指南.md》了解详细的功能说明和最佳实践。

---

*快速开始指南 v1.0.0 | 更新时间: 2024-01-15*

